{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://gcn.nasa.gov/schema/main/swift/xrt/thresholded_pixels.schema.json",
  "title": "swift.xrt.thresholded_pixels",
  "description": "GCN Notice schema for Swift XRT thresholded pixels notices (packet types 85 and 86: SWIFT_XRT_THRESHPIX and SWIFT_XRT_THRESHPIX_PROC). Not available to the public â€” Swift team only. The thresholded pixels notice is issued when the XRT ground software has identified pixels above a threshold in the XRT CCD image. Type=85 is the raw flight notice; type=86 is the ground-processed notice.",
  "type": "object",
  "allOf": [
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Alert.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/DateTime.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Pointing.schema.json" }
  ],
  "properties": {

    "alert_datetime": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 datetime string indicating when this GCN notice was issued."
    },

    "alert_tense": {
      "type": "string",
      "enum": ["current", "test"],
      "description": "Indicates whether this is a real current notice ('current') or a test submission ('test')."
    },

    "alert_type": {
      "type": "string",
      "enum": ["initial", "update"],
      "description": "Indicates whether this is the initial thresholded pixels notice ('initial') for the trigger, or a ground-reprocessed update ('update'). Type=85 (raw flight) maps to 'initial'; type=86 (ground-processed) maps to 'update', indicated by misc bit 2^30."
    },

    "mission": {
      "type": "string",
      "const": "Swift",
      "description": "Fixed string identifying the mission."
    },

    "instrument": {
      "type": "string",
      "const": "XRT",
      "description": "Fixed string identifying the instrument."
    },

    "id": {
      "type": "array",
      "items": {
        "type": "integer"
      },
      "description": "BAT trigger ID number that initiated the XRT follow-up observation. Derived from the lower 24 bits of trig_obs_num (bin[4])."
    },

    "pointing_ra": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 360.0,
      "description": "Right Ascension of the XRT boresight pointing direction, in degrees (J2000 epoch). Derived from point_ra (bin[7]) converted from 0.0001-deg units."
    },

    "pointing_dec": {
      "type": "number",
      "minimum": -90.0,
      "maximum": 90.0,
      "description": "Declination of the XRT boresight pointing direction, in degrees (J2000 epoch). Derived from point_dec (bin[8]) converted from 0.0001-deg units."
    },

    "observation_start": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 datetime string of the start of the XRT CCD integration. Derived from burst_tjd (bin[5]) and burst_sod (bin[6])."
    },

    "observation_stop": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 datetime string of the stop time of the XRT CCD integration. Derived from stop_date (bin[10]) and stop_time (bin[11])."
    },

    "observation_livetime": {
      "type": "number",
      "minimum": 0.0,
      "description": "Exposure livetime of the XRT CCD integration in seconds. Derived from expo_time (bin[9]) converted from 0.001-sec units."
    },

    "watchdog_timeout": {
      "type": "boolean",
      "description": "Indicates whether this XRT thresholded pixels notice was forced out early via the watchdog timeout mechanism rather than completing normally. Derived from misc bit 2^29."
    },

    "subtype": {
      "type": "string",
      "enum": ["FLIGHT", "GROUND"],
      "description": "Indicates whether this notice was generated from raw flight telemetry ('FLIGHT', type=85) or from ground reprocessing ('GROUND', type=86). Derived from misc bit 2^30: 0 = FLIGHT, 1 = GROUND."
    }

  },

  "required": [
    "alert_datetime",
    "alert_tense",
    "alert_type",
    "mission",
    "instrument",
    "id",
    "pointing_ra",
    "pointing_dec",
    "observation_start",
    "observation_stop",
    "observation_livetime",
    "watchdog_timeout",
    "subtype"
  ],

  "additionalProperties": false
}
