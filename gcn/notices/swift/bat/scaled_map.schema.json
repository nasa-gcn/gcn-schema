{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://gcn.nasa.gov/schema/main/swift/bat/scaled_map.schema.json",
  "title": "swift.bat.scaled_map",
  "description": "GCN Notice schema for Swift BAT scaled map notices (packet type 64: SWIFT_BAT_SCALED_MAP). Not available to the public — Swift team only. The scaled map notice is issued when the BAT ground software has generated a sky-plane scaled map FITS file for the trigger. bin[5–6] contains the map generation time (stored as trigger_time), not the BAT burst trigger time. bin[7–8] contains the spacecraft pointing direction (ra_pointing/dec_pointing), not the burst position. ra/dec from the Localization base schema are null for this notice type as no burst position is available in the packet.",
  "type": "object",
  "allOf": [
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Alert.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/DateTime.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Reporter.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Event.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Localization.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Pointing.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/GeoLocBase.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Statistics.schema.json" }
  ],
  "properties": {

    "scaled_map_fits_file": {
      "type": "string",
      "contentEncoding": "base64",
      "contentMediaType": "image/fits",
      "description": "Base64-encoded content of the BAT scaled map FITS file. The raw binary packet (bin[22–38]) contains only the filename portion of the URL pointing to this file; the base64-encoded file content is populated during GCN ground processing."
    },

    "watchdog_timeout": {
      "type": "boolean",
      "description": "Indicates whether this BAT_SCALED_MAP notice was forced out early via the watchdog timeout mechanism rather than completing normally. Derived from misc bit 2^29."
    },

    "star_tracker_locked": {
      "type": "boolean",
      "description": "Indicates whether the StarTracker was locked at the time of the BAT trigger. True = locked; False = not locked (trigger is probably bogus). Derived from soln_status bit 2^10 (st_loss_lock) via lookup table. Only valid if misc bit 2^24 is set."
    }

  },

  "required": [
    "scaled_map_fits_file",
    "watchdog_timeout",
    "star_tracker_locked"
  ],

  "additionalProperties": false
}