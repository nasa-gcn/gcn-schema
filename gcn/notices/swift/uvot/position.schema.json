{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://gcn.nasa.gov/schema/main/swift/uvot/position.schema.json",
  "title": "swift.uvot.position",
  "description": "GCN Notice schema for Swift UVOT position notices (packet type 81: SWIFT_UVOT_POSITION). Issued by the UVOT ground software when it has determined a position for the burst/afterglow in the UVOT image. The position (ra/dec) is determined by the UVOT ground software, not the BAT flight software. The high-precision error (hi_prec_err, bin[16]) is used for ra_dec_error as it avoids the 0.36 arcsec quantization error of the low-precision burst_error (bin[11]) field.",
  "type": "object",
  "allOf": [
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Alert.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/DateTime.schema.json" },
    { "$ref": "https://gcn.nasa.gov/schema/main/gcn/notices/core/Localization.schema.json" }
  ],
  "properties": {

    "alert_datetime": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 datetime string indicating when this GCN notice was issued."
    },

    "alert_tense": {
      "type": "string",
      "enum": ["current", "test"],
      "description": "Indicates whether this is a real current notice ('current') or a test submission ('test'). Derived from soln_status bit 2^30 (test_submit)."
    },

    "alert_type": {
      "type": "string",
      "enum": ["initial", "retraction"],
      "description": "Indicates whether this is a new UVOT position notice ('initial') or a retraction ('retraction'). Derived from soln_status bit 2^5 (def_not_grb): set to 'retraction' when the source is definitively classified as not a GRB."
    },

    "mission": {
      "type": "string",
      "const": "Swift",
      "description": "Fixed string identifying the mission."
    },

    "instrument": {
      "type": "string",
      "const": "UVOT",
      "description": "Fixed string identifying the instrument."
    },

    "id": {
      "type": "array",
      "items": {
        "type": "integer"
      },
      "description": "BAT trigger ID number. Derived from the lower 24 bits of trig_obs_num (bin[4]). Note: the trigger ID originates from BAT even for UVOT position notices, as the initial trigger is always from BAT."
    },

    "observation_start": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 datetime string of the start of the Swift-UVOT observation. Derived from burst_tjd (bin[5]) and burst_sod (bin[6])."
    },

    "ra": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 360.0,
      "description": "Right Ascension of the burst/afterglow position as determined by the UVOT ground software, in degrees (J2000 epoch). Derived from burst_ra (bin[7]) converted from 0.0001-deg units."
    },

    "dec": {
      "type": "number",
      "minimum": -90.0,
      "maximum": 90.0,
      "description": "Declination of the burst/afterglow position as determined by the UVOT ground software, in degrees (J2000 epoch). Derived from burst_dec (bin[8]) converted from 0.0001-deg units."
    },

    "ra_dec_error": {
      "type": "number",
      "minimum": 0.0,
      "description": "High-precision 90%-containment position error radius in degrees, including both statistical and systematic contributions. Derived from hi_prec_err (bin[16]) in units of centi-arcsec, converted to degrees by multiplying by 1e-4 / 36. This field is preferred over the low-precision burst_error (bin[11]) which has a 0.36 arcsec quantization error."
    },

    "systematic_included": {
      "type": "boolean",
      "const": true,
      "description": "Indicates whether the position error includes systematic contributions. Always True for UVOT positions â€” the hi_prec_err field (bin[16]) explicitly includes both statistical and systematic contributions."
    },

    "magnitude": {
      "type": "number",
      "description": "Magnitude of the burst/afterglow in the specified UVOT filter. Derived from burst_mag (bin[9]) converted from centi-mag units (divided by 100)."
    },

    "magnitude_error": {
      "type": "number",
      "minimum": 0.0,
      "description": "Uncertainty in the magnitude value in the specified UVOT filter, in magnitudes. Derived from mag_error (bin[20]) converted from centi-mag units (divided by 100)."
    },

    "filter": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "Blocked",
          "UV_Grism",
          "UVW2",
          "V",
          "UVM2",
          "Vis_Grism",
          "UVW1",
          "U",
          "Magnifier",
          "B",
          "White",
          "unknown"
        ]
      },
      "minItems": 1,
      "maxItems": 1,
      "description": "UVOT filter used for the observation in which the position was determined. Decoded from the filter integer (bin[10]) via lookup table. Possible values: Blocked=0, UV_Grism=1, UVW2=2, V=3, UVM2=4, Vis_Grism=5, UVW1=6, U=7, Magnifier=8, B=9, White=10, unknown=11."
    },

    "uvot_xrt_distance": {
      "type": "number",
      "minimum": 0.0,
      "description": "Angular distance between the UVOT afterglow position and the XRT position, in degrees. Derived from the uvot-xrt field (bin[21]) converted from 0.0001-deg units (multiplied by 1e-4). Provides a consistency check between the UVOT and XRT localizations."
    }

  },

  "required": [
    "alert_datetime",
    "alert_tense",
    "alert_type",
    "mission",
    "instrument",
    "id",
    "observation_start",
    "ra",
    "dec",
    "ra_dec_error",
    "systematic_included",
    "magnitude",
    "magnitude_error",
    "filter",
    "uvot_xrt_distance"
  ],

  "additionalProperties": false
}
