{
  "$id": "https://gcn.nasa.gov/schema/main/gcn/notices/fermi/lat/flare.alert.schema.json",
  "$schema": "https://json-schema.org/draft/2025-11/schema",
  "type": "object",
  "title": "Fermi-LAT Flare Advocate Alert",
  "description": "This schema is to alert the scientific comunity about a flare. It gives information about the position, the time, the flux, the photon index and the presence of high-energy photons.",
  "unevaluatedProperties": false,
  "allOf": [
    {
      "$ref": "../../core/Alert.schema.json"
    },
    {
      "$ref": "../../core/DateTime.schema.json"
    },
    {
      "$ref": "../../core/Event.schema.json"
    },
    {
      "$ref": "../../core/Localization.schema.json"
    },
    {
      "$ref": "../../core/Redshift.schema.json"
    },
    {
      "$ref": "../../core/Reporter.schema.json"
    },
    {
      "$ref": "../../core/spectral/GammaRay.schema.json" 
    }
  ],
  "properties": {
    "$schema": {
      "type": "string",
      "format": "uri"
    },
    "flux": {
      "type": "number",
      "description": "Daily averaged gamma-ray flux [ph/cm2/s]"
    },
    "flux_error": {
      "type": "number",
      "description": "Daily averaged gamma-ray flux error [ph/cm2/s]"
    },
    "flux_ratio": {
      "type": "number",
      "description": "Factor by which the flux has increased with respect to the average flux in the fourth Fermi-LAT catalog (4FGL)"
    },
    "alpha_4FGL": {
      "type": "number",
      "description": "Photon index value from the 4FGL catalog"
    },
    "alpha_error_4FGL": {
      "type": "number",
      "description": "1-sigma uncertainty of alpha_4FGL"
    },
    "TS": {
      "type": "number",
      "description": "Test statistic for detection of the source"
    },
    "subtype": {
    "enum": ["high_energy_photons", "flux_ratio"],
    "description": "High-energy photons is required when high-energy photons are detected at 1 degree from the source, while flux ratio is required when the flux is increasing and surpassing a threshold that could be 10 for example"
  }
 }
}
